(()=>{const e=document.querySelector("tbody"),t=document.getElementById("data-list"),n=document.getElementById("pagination"),a=document.getElementById("name-search"),r=document.getElementById("filter-by-state"),o=document.querySelectorAll("th");let s,i,c,l=1;function d(e){return e.toUpperCase()}function u(e,t,n,a){for(head of(a=s&&"ALL"===i?filtered=L(s):s&&"ALL"!==i?filtered=p(i,s):s||"ALL"!==i&&void 0!==i?filtered=g(i):c,o))e!==head&&(head.className="");0===e.classList.length?(e.className="arrow-down",b(a.sort(f(t,!1,n)))):"arrow-down"===e.className?(e.classList.toggle("arrow-up"),b(a.sort(f(t,!0,n)))):(e.classList.toggle("arrow-up"),b(a.sort(f(t,!1,n))))}function f(e,t,n){const a=n?function(t){return n(t[e])}:function(t){return t[e]};return t=t?-1:1,function(e,n){return e=a(e),n=a(n),t*((e>n)-(n>e))}}function m(e){let t=e.target.value;i=t,b(s&&"ALL"===t?L(s):s&&"ALL"!==t?p(t,s):s||"ALL"!==t?g(t):c)}function p(e,t){return c.filter((t=>t.adress.state===e)).filter((e=>-1!==e.firstName.toLowerCase().indexOf(t)))}function L(e){return c.filter((t=>-1!==t.firstName.toLowerCase().indexOf(e)))}function g(e){return c.filter((t=>t.adress.state===e))}function b(t){l=1,h(t,e,20,l),v(t,n,20)}function h(e,n,a,r){n.innerHTML="";let o=a*--r,s=o+a,i=e.slice(o,s);for(const e of i){const a=document.importNode(t.content,!0),r=a.querySelectorAll("td"),o=a.querySelector("tr");r[0].textContent=e.id,r[1].textContent=e.firstName,r[2].textContent=e.lastName,r[3].textContent=e.email,r[4].textContent=e.phone,r[5].textContent=e.adress.state,n.append(a),y(o,e)}}function v(e,t,n){t.innerHTML="";let a=Math.ceil(e.length/n);for(let n=1;n<a+1;n++){let a=w(n,e);t.appendChild(a)}}function w(t,n){let a=document.createElement("button");return a.innerText=t,l===t&&a.classList.add("active"),a.addEventListener("click",(function(){l=t,h(n,e,20,l),document.querySelector(".page-numbers button.active").classList.remove("active"),a.classList.add("active")})),a}function y(e,t){e.addEventListener("click",(()=>{const e=document.getElementById("detailed-info");e.className="visible",e.innerHTML=`\n      <p><b>Profile info:</b></p>\n      <p><b>Selected profile:</b> ${t.firstName} ${t.lastName}</p>\n      <p><b>Description:</b> ${t.description}</p>\n      <p><b>Address:</b> ${t.adress.streetAddress}</p>\n      <p><b>City:</b> ${t.adress.city}</p>\n      <p><b>State:</b> ${t.adress.state}</p>\n      <p><b>Index:</b> ${t.adress.zip}</p>\n    `,e.scrollIntoView({behavior:"smooth"})}))}!async function(){if("content"in document.createElement("template"))try{const t=await("https://itrex-react-lab-files.s3.eu-central-1.amazonaws.com/react-test-api.json",fetch("https://itrex-react-lab-files.s3.eu-central-1.amazonaws.com/react-test-api.json").then((e=>e.status>=200&&e.status<300?e.json():e.json().then((e=>{throw console.log(e),new Error("Something went wrong - server-side!")})))).catch((e=>{throw console.log(e),new Error("Something went wrong!")})));c=t,h(c,e,20,l),v(c,n,20),function(){const e=[];for(item of c)e.push(item.adress.state);for(state of(t=e,Array.from(new Set(t)))){const e=document.createElement("option");e.textContent=state,e.value=state,r.append(e)}var t;r.addEventListener("change",m)}(),function(){for(const e of o)eventLisener=e.addEventListener("click",(function(e){switch(value=e.target.textContent,value){case"id":u(e.target,value,parseInt);break;case"First name":u(e.target,"firstName",d);break;case"Last name":u(e.target,"lastName",d);break;case"Email":u(e.target,"email",d);break;case"Phone":u(e.target,"phone",d);break;case"State":u(e.target,"adress",(e=>e.state))}}))}()}catch(e){alert(e.message),console.log(e.response)}}(),a.addEventListener("input",(function(e){let t=e.target.value.trim().toLowerCase();s=t,b("ALL"!==i&&void 0!==i?p(i,t):L(t))}))})();